<% render_req ||= true # render_req is true for single file edit, false for batch edit%>
<div class="control-group">
  <% vals =  f.object[key] %>
  <% if render_req && f.object.required?(key) %>
    <% tmp = '<span class="error">*</span>' + field_label(key) %>
    <%= f.label key, tmp.html_safe, :class=>"control-label"  %>
  <% else %>
    <%= f.label key, field_label(key), :class=>"control-label"%>
  <% end %>
  <% if vals.size == 0 %>
    <%= render_edit_field_partial(key, f:f,  v: "", index: 0, render_req: render_req) %>
  <% end %>
  <% vals.to_ary.each_with_index do |v, index| %>
    <%= render_edit_field_partial(key, f:f,  v: v, index: index, render_req: render_req) %>
  <% end %>
 </div><!-- /control-group -->

